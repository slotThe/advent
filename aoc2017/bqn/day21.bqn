âŸ¨SplitâŸ© â† â€¢Import "../../util/bqn_util/util.bqn"
P â† { # Parse line
  fâ€¿t â† '='Splitğ•© â‹„ f Â¯1âŠ¸â†“â†© â‹„ t 2âŠ¸â†“â†©
  (> ".#"âŠ¸âŠÂ¨ âˆ˜ ('/'âŠ¸Split))Â¨ fâ€¿t
}
E â† { ğ•Š fâ€¿t: (â¥ŠâŸ¨âŒ½Ë˜,âŠ¢âŸ©{ğ•ğ•©}âŒœ(â‰âŒ½)âŸ(â†•4)f)â‹ˆÂ¨<t } # Expand
inp â† âˆŠâˆ˜(âŠ‘Â¨)âŠ¸/ âˆ¾Eâˆ˜PÂ¨ â€¢FLines "../inputs/day21.txt"
start â† >".#"âŠ¸âŠÂ¨âŸ¨".#.", "..#", "###"âŸ©

Widen â† { kâ€¿matchesğ•Šgrid:
  n â† kÃ·Ëœâ‰ grid
  âˆ¾nâ€¿nâ¥Š{ ğ•Šixs:
    <1âŠ‘âŠ‘ (ixsâŠ‘grid)âŠ¸{ğ•¨â‰¡âŠ‘ğ•©}Â¨âŠ¸/matches
  }Ë˜(â¥Šâ‹ˆâŒœËœ+âŸœkâŸ(â†•n)0)+âŒœâ†•kâ€¿k
}
Sim â† {
  0=2|â‰ ğ•©? âŸ¨2, {2=â‰ âŠ‘ğ•©}Â¨âŠ¸/inpâŸ© Widen ğ•©;
  0=3|â‰ ğ•©? âŸ¨3, {3=â‰ âŠ‘ğ•©}Â¨âŠ¸/inpâŸ© Widen ğ•©
}

+Â´â¥Š SimâŸ5  start # â‡’ 155
+Â´â¥Š SimâŸ18 start # â‡’ 2449665
