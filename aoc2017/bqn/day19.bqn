inp â† {(' 'â¥ŠËœâ‰ ğ•©)âˆ¾âŒ½â‰ğ•©}âŸ4 >â€¢FLines"../inputs/day19.txt"

ND â† { pos ğ•Š dir: # Compute new direction for pos going in dir.
  ds â† (<Â¯1Ã—dir)(Â¬âˆ˜â·/âŠ¢)âŸ¨1â€¿0, 0â€¿1, Â¯1â€¿0, 0â€¿Â¯1âŸ© # Not where we came from
  ds/Ëœ' 'â‰ inpâŠ‘Ëœds+<pos                        # Not empty space
}

path â† {
  Â·â€¿pthâ€¿pos â† { ğ•Šdirâ€¿pthâ€¿pos:
      {' '=inpâŠ‘Ëœdir+pos? dir(âŠ‘posâŠ¸ND)â†©;@} # Change direction if necessary
      âŸ¨dir, pthâˆ¾posâŠ‘inp, pos+dirâŸ©
  }â€¢_while_{
    ğ•Šdirâ€¿Â·â€¿pos: 0< â‰ pos ND dir   # While we can move somewhere
  } âŸ¨1â€¿0, "", âŸ¨1, âŠ‘'|'âŠËœ1âŠinpâŸ©âŸ©
  pthâˆ¾posâŠ‘inp                    # Add last position to final path
}

â€¢Show âˆŠâŸœ('A'+â†•26)âŠ¸/ path # â‡’ "RUEDAHWKSM"
â€¢Show â‰ path              # â‡’ 17264
