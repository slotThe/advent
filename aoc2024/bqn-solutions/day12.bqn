âŸ¨Ints,_FixâŸ© â† â€¢Import "../../util/bqn_util/util.bqn"
inp â† '@'-Ëœ >â€¢FLines"../inputs/day12.txt" # '@'='A'-1
ts â† âŸ¨Â»Ë˜,Â«Ë˜,Â»,Â«âŸ© # turns: rightâ€¿leftâ€¿downâ€¿up

# Same idea as 2017/16, but more complicated.
regions â† { ğ•Šp: pâŒˆÂ´({inp=ğ•inp}Â¨ts){ğ•¨Ã—ğ•p}Â¨ts }_Fix (+`âŠ¸Ã—âŒ¾â¥Š)inp

Perim â† {ğ•Šr: +Â´{+Â´â¥Šrâˆ§Â¬ğ•r}Â¨ts }
+Â´{ (Perim r) Ã— +Â´â¥Šrâ†ğ•©=regions }Â¨â·â¥Šregions

Corners â† { ğ•Šr: +Â´(2âŒ½ts){ +Â´â¥Š eâˆ§Â¬ğ•eâ†râˆ§Â¬ğ•r }Â¨ts }
+Â´{ (Corners r) Ã— +Â´â¥Šrâ†ğ•©=regions }Â¨â·â¥Šregions
