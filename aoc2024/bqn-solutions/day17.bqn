âŸ¨IntsâŸ© â† â€¢Import "../../util/bqn_util/util.bqn"
âŸ¨BV,ToNum,Rst,Lst,XOR,b0,b1,b2,b3,b7âŸ© â† â€¢Import"../../util/bqn_util/bitvec.bqn"

âŸ¨a,Â·,Â·âŸ©â€¿ops â† 3(â†‘â‹ˆâ†“) BVÂ¨ Ints âˆ¾â€¢FLines"../inputs/day17.txt"

# Hand optimised from input: (ğ•© & 7 ^ 1) ^ (ğ•© Â» (ğ•© & 7 ^ 2)) & 7
Step â† { b7âˆ§(b1 XOR ğ•©âˆ§b7)XOR(ğ•© Rst (b2 XOR ğ•©âˆ§b7)) }
r â† âŸ¨âŸ©
{ râ†©râˆ¾<Stepğ•© â‹„ ğ•© Rst 3 }â€¢_while_(âˆ¨Â´) a
!"7,1,5,2,4,0,7,6,1"â‰¡ 1â†“âˆ¾âˆ¾','âŠ¸â‹ˆâˆ˜â€¢Reprâˆ˜ToNumÂ¨r

Two â† {
  { ğ•Šopsâ€¿prevs:
    âŸ¨Â¯1â†“ops, âˆ¾{ğ•Šp: {(Stepğ•©) â‰¡ Â¯1âŠ‘ops}Â¨âŠ¸/{(BVğ•©)âˆ¨ p Lst 3}Â¨â†•8}Â¨prevsâŸ©
  }â€¢_while_{ ğ•Šopsâ€¿Â·: âŸ¨âŸ©â‰¢ops } ğ•©â€¿âŸ¨b0âŸ©
}
!37222273957364â‰¡âŒŠÂ´ToNumÂ¨1âŠ‘Two ops
