âŸ¨SplitF,Ints,_FixâŸ© â† â€¢Import "../../util/bqn_util/util.bqn"
inpâ†>â€¢FLines"../inputs/day06.txt"
startâ†âŸ¨âŠ‘'^'(/â—‹â¥ŠâŸœ(â†•â‰¢)â·)inp, Â¯1â€¿0âŸ©

Turn â† { # Given direction ğ•©, turn ğ•¨ steps to the right.
  ts â† âŸ¨Â¯1â€¿0, 0â€¿1, 1â€¿0, 0â€¿Â¯1âŸ©
  (âŠ‘4|ğ•¨+tsâŠ<ğ•©)âŠ‘ts
}

seenâ†â€¢HashMapËœâŸ¨âŸ©
pathâ†âŸ¨âŸ©
Sim â† {
  seen.DeleteÂ¨seen.Keys@
  start seen.Set@
  r â† (>ğ•©){
    grid ğ•Š pâ€¿d:
      seen.HasâŸ¨p+d,dâŸ©? "LOOP";
    grid ğ•Š pâ€¿d:
      np â† p+d
      { ğ•Š@: @;
        ğ•Š'#': âŸ¨p, 1 Turn dâŸ©;
        ğ•ŠÂ·: âŸ¨np,dâŸ© âŠ£ âŸ¨np,dâŸ©seen.Set@
      }npâŠ‘âŠ@grid
  }â€¢_while_{ Â·ğ•Š"LOOP": 0; Â·ğ•Š@: 0; 1 }start
  r âŠ£ pathâ†©â·âŠ‘Â¨seen.Keys@
}
Sim <inp
â‰ path                                               # â‡’ 4758
â‰ "LOOP"âŠ¸â‰¡Â¨âŠ¸/SimÂ¨{<'#'âŒ¾(ğ•©âŠ¸âŠ‘)inp}Â¨((âŠ‘start)âŠ¸â‰¢Â¨âŠ¸/)path # â‡’ 1670
